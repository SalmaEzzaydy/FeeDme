{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-6ae6fdc5\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"div_class\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"You will be redirected to payment page\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"alert alert-primary\"\n}, \" While making payment use card number 4242 4242 4242 4242 and enter random date and cvv (3 digit) \", -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, _createElementVNode(\"button\", {\n    class: \"btn btn-primary\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.goToCheckout && $options.goToCheckout(...args))\n  }, \"Make Payment\")]);\n}","map":{"version":3,"mappings":";;;EACOA,KAAK,EAAC;AAAW;gEACpBC,oBAA+C,YAA3C,wCAAsC;gEAC1CA,oBAGM;EAHDD,KAAK,EAAC;AAAqB,GAAC,oGAGjC;;;uBALFE,oBAQM,OARNC,UAQM,GAPJC,UAA+C,EAC/CC,UAGM,EAENJ,oBAA2E;IAAnED,KAAK,EAAC,iBAAiB;IAAEM,OAAK,yCAAEC,uDAAY;KAAE,cAAY","names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","onClick","$options"],"sourceRoot":"","sources":["C:\\Users\\lenovo\\Desktop\\vue\\ecommerce-ui\\src\\views\\Checkout\\Checkout.vue"],"sourcesContent":["<template>\n  <div class=\"div_class\">\n    <h3>You will be redirected to payment page</h3>\n    <div class=\"alert alert-primary\">\n      While making payment use card number 4242 4242 4242 4242 and enter random\n      date and cvv (3 digit)\n    </div>\n\n    <button class=\"btn btn-primary\" @click=\"goToCheckout\">Make Payment</button>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      stripeAPIToken: 'sk_test_51MYGLMFGwibAvTNj2ztaKPfwhXlQbkDvaDCumfLahagCTy0KdMJuw4rkTKH7yOCBHq4mAnpkCQFKQmmxPrCb2pa000bbF4Aj1y',\n      stripe: '',\n      token: null,\n      checkoutBodyArray: [],\n    };\n  },\n  name: 'Checkout',\n  props: ['baseURL'],\n  methods: {\n    getAllItems() {\n      axios\n        .get(`${this.baseURL}cart/?token=${this.token}`)\n        .then((response) => {\n          if (response.status == 200) {\n            let products = response.data;\n            for (let i = 0; i < products.cartItems.length; i++) {\n              this.checkoutBodyArray.push({\n                price: products.cartItems[i].product.price,\n                quantity: products.cartItems[i].quantity,\n                productName: products.cartItems[i].product.name,\n                productId: products.cartItems[i].product.id,\n              });\n            }\n          }\n        })\n        .catch((err) => console.log(err));\n    },\n    goToCheckout() {\n      console.log('checkoutBodyArray', this.checkoutBodyArray);\n      axios\n        .post(\n          `${this.baseURL}order/create-checkout-session`,\n          this.checkoutBodyArray\n        )\n        .then((response) => {\n          localStorage.setItem('sessionId', response.data.sessionId);\n          console.log('session', response.data);\n          this.stripe.redirectToCheckout({\n            sessionId: response.data.sessionId,\n          });\n        })\n        .catch((err) => console.log(err));\n    },\n  },\n  mounted() {\n    this.token = localStorage.getItem('token');\n    this.stripe = window.Stripe(this.stripeAPIToken);\n    this.getAllItems();\n  },\n};\n</script>\n<style scoped>\n.alert {\n  width: 50%;\n}\n\n.div_class {\n  margin-top: 5%;\n  margin-left: 30%;\n}\n\n.checkout_button {\n  background-color: #5d3dec;\n  margin: 10px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}