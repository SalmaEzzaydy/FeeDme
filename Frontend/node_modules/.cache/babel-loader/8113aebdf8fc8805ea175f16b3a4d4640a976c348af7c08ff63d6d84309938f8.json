{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      stripeAPIToken: 'sk_test_51MYGLMFGwibAvTNj2ztaKPfwhXlQbkDvaDCumfLahagCTy0KdMJuw4rkTKH7yOCBHq4mAnpkCQFKQmmxPrCb2pa000bbF4Aj1y',\n      stripe: '',\n      token: null,\n      checkoutBodyArray: []\n    };\n  },\n  name: 'Checkout',\n  props: ['baseURL'],\n  methods: {\n    getAllItems() {\n      axios.get(`${this.baseURL}cart/?token=${this.token}`).then(response => {\n        if (response.status == 200) {\n          let products = response.data;\n          for (let i = 0; i < products.cartItems.length; i++) {\n            this.checkoutBodyArray.push({\n              price: products.cartItems[i].product.price,\n              quantity: products.cartItems[i].quantity,\n              productName: products.cartItems[i].product.name,\n              productId: products.cartItems[i].product.id\n            });\n          }\n        }\n      }).catch(err => console.log(err));\n    },\n    goToCheckout() {\n      console.log('checkoutBodyArray', this.checkoutBodyArray);\n      axios.post(`${this.baseURL}order/create-checkout-session`, this.checkoutBodyArray).then(response => {\n        localStorage.setItem('sessionId', response.data.sessionId);\n        console.log('session', response.data);\n        this.stripe.redirectToCheckout({\n          sessionId: response.data.sessionId\n        });\n      }).catch(err => console.log(err));\n    }\n  },\n  mounted() {\n    this.token = localStorage.getItem('token');\n    this.stripe = window.Stripe(this.stripeAPIToken);\n    this.getAllItems();\n  }\n};","map":{"version":3,"mappings":";AAaA,OAAOA,KAAI,MAAO,OAAO;AACzB,eAAe;EACbC,IAAI,GAAG;IACL,OAAO;MACLC,cAAc,EAAE,6GAA6G;MAC7HC,MAAM,EAAE,EAAE;MACVC,KAAK,EAAE,IAAI;MACXC,iBAAiB,EAAE;IACrB,CAAC;EACH,CAAC;EACDC,IAAI,EAAE,UAAU;EAChBC,KAAK,EAAE,CAAC,SAAS,CAAC;EAClBC,OAAO,EAAE;IACPC,WAAW,GAAG;MACZT,KAAI,CACDU,GAAG,CAAE,GAAE,IAAI,CAACC,OAAQ,eAAc,IAAI,CAACP,KAAM,EAAC,EAC9CQ,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACC,MAAK,IAAK,GAAG,EAAE;UAC1B,IAAIC,QAAO,GAAIF,QAAQ,CAACZ,IAAI;UAC5B,KAAK,IAAIe,IAAI,CAAC,EAAEA,IAAID,QAAQ,CAACE,SAAS,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;YAClD,IAAI,CAACX,iBAAiB,CAACc,IAAI,CAAC;cAC1BC,KAAK,EAAEL,QAAQ,CAACE,SAAS,CAACD,CAAC,CAAC,CAACK,OAAO,CAACD,KAAK;cAC1CE,QAAQ,EAAEP,QAAQ,CAACE,SAAS,CAACD,CAAC,CAAC,CAACM,QAAQ;cACxCC,WAAW,EAAER,QAAQ,CAACE,SAAS,CAACD,CAAC,CAAC,CAACK,OAAO,CAACf,IAAI;cAC/CkB,SAAS,EAAET,QAAQ,CAACE,SAAS,CAACD,CAAC,CAAC,CAACK,OAAO,CAACI;YAC3C,CAAC,CAAC;UACJ;QACF;MACF,CAAC,EACAC,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;IACrC,CAAC;IACDG,YAAY,GAAG;MACbF,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAACxB,iBAAiB,CAAC;MACxDL,KAAI,CACD+B,IAAI,CACF,GAAE,IAAI,CAACpB,OAAQ,+BAA8B,EAC9C,IAAI,CAACN,iBAAgB,CACvB,CACCO,IAAI,CAAEC,QAAQ,IAAK;QAClBmB,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEpB,QAAQ,CAACZ,IAAI,CAACiC,SAAS,CAAC;QAC1DN,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEhB,QAAQ,CAACZ,IAAI,CAAC;QACrC,IAAI,CAACE,MAAM,CAACgC,kBAAkB,CAAC;UAC7BD,SAAS,EAAErB,QAAQ,CAACZ,IAAI,CAACiC;QAC3B,CAAC,CAAC;MACJ,CAAC,EACAR,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;IACrC;EACF,CAAC;EACDS,OAAO,GAAG;IACR,IAAI,CAAChC,KAAI,GAAI4B,YAAY,CAACK,OAAO,CAAC,OAAO,CAAC;IAC1C,IAAI,CAAClC,MAAK,GAAImC,MAAM,CAACC,MAAM,CAAC,IAAI,CAACrC,cAAc,CAAC;IAChD,IAAI,CAACO,WAAW,EAAE;EACpB;AACF,CAAC","names":["axios","data","stripeAPIToken","stripe","token","checkoutBodyArray","name","props","methods","getAllItems","get","baseURL","then","response","status","products","i","cartItems","length","push","price","product","quantity","productName","productId","id","catch","err","console","log","goToCheckout","post","localStorage","setItem","sessionId","redirectToCheckout","mounted","getItem","window","Stripe"],"sourceRoot":"","sources":["C:\\Users\\lenovo\\Desktop\\vue\\ecommerce-ui\\src\\views\\Checkout\\Checkout.vue"],"sourcesContent":["<template>\n  <div class=\"div_class\">\n    <h3>You will be redirected to payment page</h3>\n    <div class=\"alert alert-primary\">\n      While making payment use card number 4242 4242 4242 4242 and enter random\n      date and cvv (3 digit)\n    </div>\n\n    <button class=\"btn btn-primary\" @click=\"goToCheckout\">Make Payment</button>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      stripeAPIToken: 'sk_test_51MYGLMFGwibAvTNj2ztaKPfwhXlQbkDvaDCumfLahagCTy0KdMJuw4rkTKH7yOCBHq4mAnpkCQFKQmmxPrCb2pa000bbF4Aj1y',\n      stripe: '',\n      token: null,\n      checkoutBodyArray: [],\n    };\n  },\n  name: 'Checkout',\n  props: ['baseURL'],\n  methods: {\n    getAllItems() {\n      axios\n        .get(`${this.baseURL}cart/?token=${this.token}`)\n        .then((response) => {\n          if (response.status == 200) {\n            let products = response.data;\n            for (let i = 0; i < products.cartItems.length; i++) {\n              this.checkoutBodyArray.push({\n                price: products.cartItems[i].product.price,\n                quantity: products.cartItems[i].quantity,\n                productName: products.cartItems[i].product.name,\n                productId: products.cartItems[i].product.id,\n              });\n            }\n          }\n        })\n        .catch((err) => console.log(err));\n    },\n    goToCheckout() {\n      console.log('checkoutBodyArray', this.checkoutBodyArray);\n      axios\n        .post(\n          `${this.baseURL}order/create-checkout-session`,\n          this.checkoutBodyArray\n        )\n        .then((response) => {\n          localStorage.setItem('sessionId', response.data.sessionId);\n          console.log('session', response.data);\n          this.stripe.redirectToCheckout({\n            sessionId: response.data.sessionId,\n          });\n        })\n        .catch((err) => console.log(err));\n    },\n  },\n  mounted() {\n    this.token = localStorage.getItem('token');\n    this.stripe = window.Stripe(this.stripeAPIToken);\n    this.getAllItems();\n  },\n};\n</script>\n<style scoped>\n.alert {\n  width: 50%;\n}\n\n.div_class {\n  margin-top: 5%;\n  margin-left: 30%;\n}\n\n.checkout_button {\n  background-color: #5d3dec;\n  margin: 10px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}